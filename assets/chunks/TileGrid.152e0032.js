var wt=Object.defineProperty;var pt=(t,e,r)=>e in t?wt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var k=(t,e,r)=>(pt(t,typeof e!="symbol"?e+"":e,r),r),J=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var h=(t,e,r)=>(J(t,e,"read from private field"),r?r.call(t):e.get(t)),O=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},j=(t,e,r,n)=>(J(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);var d=(t,e,r)=>(J(t,e,"access private method"),r);import{d as tt,o as q,c as C,_ as et,g as Q,e as _,u as $,t as nt,n as Tt,h as st,F as ot,i as it,p as St,j as Ot,k as ct}from"../app.0fad7186.js";const w=t=>Number.isFinite(t)&&!Number.isNaN(t),W=t=>typeof t=="object"&&t!==null,qt=t=>typeof t=="function",P=t=>W(t)&&w(t.col)&&w(t.row),bt=t=>W(t)&&w(t.x)&&w(t.y),F=t=>Array.isArray(t)&&w(t[0])&&w(t[1]),z=(t,e)=>e+t*(e&1)>>1;function _t(t,e){return(t%e+e)%e}const Ht=(t,e)=>_t(t+e,8),L=([t,e,r=-t-e])=>({q:t,r:e,s:r});function R({q:t,r:e,s:r}){const n=w(t),s=w(e),o=w(r);if(n&&s&&o)return{q:t,r:e,s:r};if(n&&s)return{q:t,r:e,s:-t-e};if(n&&o)return{q:t,r:-t-r,s:r};if(s&&o)return{q:-e-r,r:e,s:r};throw new TypeError(`Can't determine three cube coordinates from less than two coordinates. Received: { q: ${t}, r: ${e}, s: ${r} }.`)}var g=(t=>(t.FLAT="FLAT",t.POINTY="POINTY",t))(g||{});function Nt(t,e){if(W(t)&&t.xRadius>0&&t.yRadius>0)return t;if(W(t)&&t.width>0&&t.height>0){const{width:r,height:n}=t;return e===g.POINTY?{xRadius:r/Math.sqrt(3),yRadius:n/2}:{xRadius:r/2,yRadius:n/Math.sqrt(3)}}if(t>0)return{xRadius:t,yRadius:t};throw new TypeError(`Invalid dimensions: ${JSON.stringify(t)}. Dimensions must be expressed as an Ellipse ({ xRadius: number, yRadius: number }), a Rectangle ({ width: number, height: number }) or a number.`)}function vt(t,e){if(bt(t))return t;if(!e)throw new TypeError(`Supply a bounding box ({ width: number, height: number }). Received: ${JSON.stringify(e)}`);if(t==="topLeft")return{x:e.width*-.5,y:e.height*-.5};throw new TypeError(`Invalid origin: ${JSON.stringify(t)}. Origin must be expressed as a Point ({ x: number, y: number }) or the string 'topLeft'.`)}class rt{constructor(e=[0,0]){k(this,"q");k(this,"r");const{q:r,r:n}=Y(this,e);this.q=r,this.r=n}static get settings(){const{dimensions:e,orientation:r,origin:n,offset:s}=this.prototype;return{dimensions:e,orientation:r,origin:n,offset:s}}get center(){const{width:e,height:r,x:n,y:s}=this;return{x:e/2-n,y:r/2-s}}get col(){return K(this).col}get corners(){const{orientation:e,width:r,height:n,x:s,y:o}=this;return e===g.POINTY?Ct(r,n,s,o):Pt(r,n,s,o)}get dimensions(){return N.dimensions}get height(){const{orientation:e,dimensions:{yRadius:r}}=this;return e===g.POINTY?r*2:r*Math.sqrt(3)}get isFlat(){return this.orientation===g.FLAT}get isPointy(){return this.orientation===g.POINTY}get orientation(){return N.orientation}get origin(){return N.origin}get offset(){return N.offset}get row(){return K(this).row}get width(){const{orientation:e,dimensions:{xRadius:r}}=this;return e===g.POINTY?r*Math.sqrt(3):r*2}get x(){return at(this).x}get y(){return at(this).y}get s(){return-this.q-this.r}clone(e=this){return new this.constructor(e)}equals(e){return Et(this,P(e)?xt(this,e):e)}toString(){return`${this.constructor.name}(${this.q},${this.r})`}translate(e){return $t(this,e)}}const N={dimensions:{xRadius:1,yRadius:1},orientation:g.POINTY,origin:{x:0,y:0},offset:-1},Ct=(t,e,r,n)=>[{x:r+t*.5,y:n-e*.25},{x:r+t*.5,y:n+e*.25},{x:r,y:n+e*.5},{x:r-t*.5,y:n+e*.25},{x:r-t*.5,y:n-e*.25},{x:r,y:n-e*.5}],Pt=(t,e,r,n)=>[{x:r+t*.25,y:n-e*.5},{x:r+t*.5,y:n},{x:r+t*.25,y:n+e*.5},{x:r-t*.25,y:n+e*.5},{x:r-t*.5,y:n},{x:r-t*.25,y:n-e*.5}];function Rt(t){const{dimensions:e,orientation:r,origin:n,offset:s}={...N,...t};return class extends rt{get dimensions(){return Nt(e,r)}get orientation(){return r}get origin(){return vt(n,this)}get offset(){return s}}}function Et(t,e){if(P(t)&&P(e))return t.col===e.col&&t.row===e.row;if(Object.hasOwn(t,"col")||Object.hasOwn(e,"col"))throw new Error(`Can't compare coordinates where one are offset coordinates. Either pass two offset coordinates or two axial/cube coordinates. Received: ${JSON.stringify(t)} and ${JSON.stringify(e)}`);const r=F(t)?L(t):t,n=F(e)?L(e):e;return r.q===n.q&&r.r===n.r}const It=(t,e,r)=>({col:t+z(r,e),row:e}),Mt=(t,e,r)=>({col:t,row:e+z(r,t)}),K=({q:t,r:e,offset:r,isPointy:n})=>n?It(t,e,r):Mt(t,e,r),at=({orientation:t,dimensions:{xRadius:e,yRadius:r},origin:{x:n,y:s},q:o,r:i})=>t===g.POINTY?{x:e*Math.sqrt(3)*(o+i/2)-n,y:r*3/2*i-s}:{x:e*3/2*o-n,y:r*Math.sqrt(3)*(i+o/2)-s},dt=(t,e,r)=>{const n=t-z(r,e),s=e,o=-n-s;return{q:n,r:s,s:o}},gt=(t,e,r)=>{const n=t,s=e-z(r,t),o=-n-s;return{q:n,r:s,s:o}},xt=({offset:t,orientation:e},{col:r,row:n})=>e===g.POINTY?dt(r,n,t):gt(r,n,t),U=t=>{const{q:e,r,s:n}=R(t);let s=Math.round(e),o=Math.round(r),i=Math.round(n);const c=Math.abs(e-s),a=Math.abs(r-o),u=Math.abs(n-i);return c>a&&c>u?s=-o-i:a>u?o=-s-i:i=-s-o,{q:s,r:o,s:i}},At=({dimensions:{xRadius:t,yRadius:e},origin:r,orientation:n},{x:s,y:o})=>(s+=r.x,o+=r.y,n===g.POINTY?U({q:Math.sqrt(3)*s/(3*t)-o/(3*e),r:2/3*(o/e)}):U({q:2/3*(s/t),r:Math.sqrt(3)*o/(3*e)-s/(3*t)}));function Y(t,e){return F(e)?L(e):P(e)?xt(t,e):R(e)}function $t(t,e){const{q:r,r:n,s}=R(t),{q:o,r:i,s:c}=R(e),a={q:r+o,r:n+i,s:s+c};return t instanceof rt?t.clone(a):a}function X(t,e,r){const{q:n,r:s,s:o}=Y(t,e),{q:i,r:c,s:a}=Y(t,r);return Math.max(Math.abs(n-i),Math.abs(s-c),Math.abs(o-a))}var Wt=(t=>(t.CLOCKWISE="CLOCKWISE",t.COUNTERCLOCKWISE="COUNTERCLOCKWISE",t))(Wt||{}),f=(t=>(t[t.N=0]="N",t[t.NE=1]="NE",t[t.E=2]="E",t[t.SE=3]="SE",t[t.S=4]="S",t[t.SW=5]="SW",t[t.W=6]="W",t[t.NW=7]="NW",t))(f||{});const Ft=[null,{q:1,r:-1},{q:1,r:0},{q:0,r:1},null,{q:-1,r:1},{q:-1,r:0},{q:0,r:-1}],Lt=[{q:0,r:-1},{q:1,r:-1},null,{q:1,r:0},{q:0,r:1},{q:-1,r:1},null,{q:-1,r:0}],Yt=({offset:t,q:e,r,col:n,row:s},o)=>{if(o===f.S||o===f.N){const c=o===f.S?s+1:s-1;return dt(n,c,t)}const i=Ft[o];return{q:e+i.q,r:r+i.r}},Bt=({offset:t,q:e,r,col:n,row:s},o)=>{if(o===f.E||o===f.W){const c=o===f.E?n+1:n-1;return gt(c,s,t)}const i=Lt[o];return{q:e+i.q,r:r+i.r}},B=(t,e)=>t.clone(t.isPointy?Yt(t,e):Bt(t,e));function V(t){return Array.isArray(t)?function(r,n){const s=[];let o=n;for(const i of t)for(const c of i(r,o))s.push(o=c);return s}:t}function ut(t){return zt(t)?kt(t):Jt(t)}function zt(t){return t.direction in f}function kt({start:t,direction:e,length:r}){return function(s,o){const i=[];let a=s(t!=null?t:o);!t&&o&&(a=B(a,e));for(let u=0;u<r;u++)i.push(a),a=B(a,e);return i}}function Jt({start:t,stop:e}){return function(n,s){const o=[],i=n(t!=null?t:s),c=ht(i),a=ht(Y(i,e)),u=jt(c,a),x=X(i,i,e),m=1/Math.max(x,1);let y=!t&&s?1:0;for(y;y<=x;y++){const S=U(u(m*y));o.push(n(S))}return o}}function ht({q:t,r:e,s:r}){return{q:t+1e-6,r:e+1e-6,s:r+-2e-6}}function jt(t,e){return r=>{const n=t.q*(1-r)+e.q*r,s=t.r*(1-r)+e.r*r;return{q:n,r:s}}}function Qt(t,e,{includeSource:r=!0}={}){return function(s,o){const i=[];for(const c of V(t)(s,o)){r&&i.push(c);for(const a of V(e)(s,c))i.push(a)}return i}}function ue(t,e){return function(n,s){var m;const{width:o,height:i,start:c,direction:a=f.E}=e?Kt(t,e,n()):t,u=(m=c!=null?c:s)!=null?m:[0,0],x=Qt(ut({start:u,direction:Ht(a,2),length:i}),ut({direction:a,length:o-1}))(n,u);return!c&&s?x.slice(1):x}}function Kt(t,e,{isPointy:r,offset:n}){const{col:s,row:o}=ft(t,r,n),{col:i,row:c}=ft(e,r,n),a=s<i?"A":"B",u=o<c?"A":"B",x=a+u,{swapWidthHeight:m,direction:y}=Ut[x],S=Math.abs(s-i)+1,H=Math.abs(o-c)+1;return{width:m?H:S,height:m?S:H,start:t,direction:y}}function ft(t,e,r){if(P(t))return t;const{q:n,r:s}=F(t)?L(t):R(t);return K({q:n,r:s,isPointy:e,offset:r})}const Ut={AA:{swapWidthHeight:!1,direction:f.E},AB:{swapWidthHeight:!0,direction:f.N},BA:{swapWidthHeight:!0,direction:f.S},BB:{swapWidthHeight:!1,direction:f.W}};var l,T,b,v,E,Z,I,G,M,D;const p=class{constructor(e,r=[]){O(this,b);O(this,E);O(this,I);O(this,M);O(this,l,void 0);O(this,T,new Map);if(e instanceof p){j(this,l,h(e,l)),this.setHexes(e);return}j(this,l,e),this.setHexes(d(this,E,Z).call(this,r))}static fromIterable(e){const r=e[Symbol.iterator]().next().value;if(!r)throw new TypeError(`Can't create grid from empty iterable: ${JSON.stringify(e)}`);return new p(r.constructor,e)}static fromJSON({hexSettings:e,coordinates:r}){const n=Rt(e);return new p(n,r.map(s=>new n(s)))}get size(){return h(this,T).size}get pixelWidth(){if(this.size===0)return 0;const{isPointy:e,width:r}=this.hexPrototype,n=this.toArray(),{0:s,length:o,[o-1]:i}=e?n.sort((c,a)=>a.s-c.s||c.q-a.q):n.sort((c,a)=>c.q-a.q);return i.x-s.x+r}get pixelHeight(){if(this.size===0)return 0;const{isPointy:e,height:r}=this.hexPrototype,n=this.toArray(),{0:s,length:o,[o-1]:i}=e?n.sort((c,a)=>c.r-a.r):n.sort((c,a)=>a.s-c.s||c.r-a.r);return i.y-s.y+r}[Symbol.iterator](){return h(this,T).values()}get hexPrototype(){return h(this,l).prototype}createHex(e){return new(h(this,l))(e)}getHex(e){const r=this.createHex(e);return h(this,T).get(r.toString())}hasHex(e){return h(this,T).has(e.toString())}setHexes(e){for(const r of e){const n=r instanceof rt?r:new(h(this,l))(r);d(this,b,v).call(this,n)}return this}filter(e){var n;const r=new p(h(this,l));for(const s of this)e(s)&&d(n=r,b,v).call(n,s);return r}map(e){var n;const r=new p(h(this,l));for(const s of this)d(n=r,b,v).call(n,e(s));return r}traverse(e,{bail:r=!1}={}){var s;const n=new p(h(this,l));for(const o of d(this,E,Z).call(this,e)){const i=this.getHex(o);if(i)d(s=n,b,v).call(s,i);else if(r)return n}return n}forEach(e){for(const r of this)e(r);return this}reduce(e,r){if(r===void 0){let s,o,i;for(const c of this)o=i,i=c,o&&(s=e(o,i));return s}let n=r;for(const s of this)n=e(n,s);return n}toArray(){return Array.from(this)}toJSON(){const{dimensions:e,orientation:r,origin:n,offset:s}=this.hexPrototype;return{hexSettings:{dimensions:e,orientation:r,origin:n,offset:s},coordinates:this.toArray()}}toString(){return`${this.constructor.name}(${this.size})`}pointToHex(e,{allowOutside:r=!0}={}){const n=At(this.hexPrototype,e),s=this.getHex(n);return r?s!=null?s:this.createHex(n):s}distance(e,r,{allowOutside:n=!0}={}){if(n)return X(this.hexPrototype,e,r);const s=this.getHex(e),o=this.getHex(r);if(!(!s||!o))return X(this.hexPrototype,s,o)}neighborOf(e,r,{allowOutside:n=!0}={}){if(n)return B(this.createHex(e),r);const s=this.getHex(e);if(!!s)return this.getHex(B(s,r))}};let lt=p;l=new WeakMap,T=new WeakMap,b=new WeakSet,v=function(e){h(this,T).set(e.toString(),e)},E=new WeakSet,Z=function(e){return d(this,I,G).call(this,e)?d(this,M,D).call(this,e):Array.isArray(e)&&d(this,I,G).call(this,e[0])?d(this,M,D).call(this,V(e)):e},I=new WeakSet,G=function(e){return qt(e)},M=new WeakSet,D=function(e){return e(this.createHex.bind(this))};const Xt=["x1","y1","x2","y2"],Vt=tt({__name:"Arrow",props:{from:null,to:null},setup(t){return(e,r)=>(q(),C("line",{x1:t.from.x,y1:t.from.y,x2:t.to.x,y2:t.to.y,"marker-end":"url(#arrow-head)",class:"line"},null,8,Xt))}});const Zt=et(Vt,[["__scopeId","data-v-f6ab7da3"]]),Gt=["points"],Dt=["x","y","font-size"],te=tt({__name:"Tile",props:{tile:null,isTraversed:{type:Boolean}},setup(t){const{tile:e,isTraversed:r}=t,n=e.corners.map(({x:o,y:i})=>`${o},${i}`).join(" "),s=Q(()=>e.height/4);return(o,i)=>(q(),C("g",{class:Tt({"is-traversed":t.isTraversed})},[_("polygon",{points:$(n),class:"polygon"},null,8,Gt),_("text",{x:t.tile.x,y:t.tile.y,"font-size":$(s),class:"coordinates"},[_("tspan",null,nt(t.tile.q)+","+nt(t.tile.r),1)],8,Dt)],2))}});const ee=et(te,[["__scopeId","data-v-d238db27"]]),re=t=>(St("data-v-549a522a"),t=t(),Ot(),t),ne=["width","height"],se=re(()=>_("defs",null,[_("marker",{id:"arrow-head",markerWidth:"10",markerHeight:"10",refX:"0",refY:"1.5",orient:"auto"},[_("path",{d:"M0,0 L0,3 L2.5,1.5 z",class:"arrow-head"})])],-1)),oe=["transform"],ie=tt({__name:"TileGrid",props:{grid:null,traversal:null},setup(t){const{grid:e,traversal:r}=t,n=Q(()=>`translate(${e.hexPrototype.width/2},${e.hexPrototype.height/2})`),s=Q(()=>{var o;return((o=r==null?void 0:r.toArray())!=null?o:[]).reduce((i,c,a,u)=>{const x=u[a+1];if(!x)return i;const{x:m,y}=c,{x:S,y:H}=x,A=Math.atan2(H-y,S-m),mt={x:m+Math.cos(A)*12,y:y+Math.sin(A)*12},yt={x:S-Math.cos(A)*26,y:H-Math.sin(A)*26};return i.concat({from:mt,to:yt})},[])});return(o,i)=>(q(),C("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:t.grid.pixelWidth,height:t.grid.pixelHeight,class:"container"},[se,_("g",{transform:$(n)},[st(o.$slots,"before",{},void 0,!0),(q(!0),C(ot,null,it(t.grid,c=>{var a;return q(),ct(ee,{key:c.toString(),tile:c,"is-traversed":(a=t.traversal)==null?void 0:a.hasHex(c)},null,8,["tile","is-traversed"])}),128)),(q(!0),C(ot,null,it($(s),({from:c,to:a})=>(q(),ct(Zt,{from:c,to:a},null,8,["from","to"]))),256)),st(o.$slots,"default",{},void 0,!0)],8,oe)],8,ne))}});const he=et(ie,[["__scopeId","data-v-549a522a"]]);export{f as D,lt as G,Wt as R,he as T,X as a,Qt as b,V as c,Rt as d,w as i,ut as l,B as n,ue as r,Y as t};
